æœ¬é¢˜éš¾åº¦ï¼šâ­ â­ 

ç­”ï¼š

` reduce()`Â æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±å¼€å‘è€…æä¾›çš„ **reducer** å‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚

ç”¨å¥½ reduceï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘ä»£ç é‡ã€‚

è¯­æ³•ï¼š
```js
arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])
```

ä¸€äº›å¸¸ç”¨çš„ç”¨æ³•ï¼š

## æ•°ç»„é‡Œæ‰€æœ‰å€¼æ±‚å’Œï¼š

```js
const arr = [1, 2, 3]
const sum = arr.reduce((acc, cur) => acc + cur)
console.log(sum)  // 6
```

## æŸ¥æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼

```js
const arr = [0, 1, 2, 3, 4, 5]
const max = arr.reduce((acc, cur) => Math.max(acc, cur))
console.log(max) // 5
```

## ç´¯åŠ å¯¹è±¡æ•°ç»„çš„å€¼ï¼š

```js
const arr = [{ x: 1 }, { x: 2 }, { x: 3 }]
const sum = arr.reduce((acc, cur) => acc + cur.x, 0)
console.log(sum) // 6
```
## å°†äºŒç»´æ•°ç»„è½¬åŒ–ä¸ºä¸€ç»´æ•°ç»„ï¼š

```js
const arr = [[0, 1], [2, 3], [4, 5]]
const res = arr.reduce((acc, cur) => acc.concat(cur), [])
console.log(res) // [0, 1, 2, 3, 4, 5]
```

ä¸è¿‡ä¸å¦‚ç›´æ¥ç”¨æ•°ç»„ flat æ–¹æ³•ç®€æ´ã€‚

```js
const arr = [[0, 1], [2, 3], [4, 5]]
const res = arr.flat() // [0, 1, 2, 3, 4, 5]
```

## è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼š

```js
const arr = ['hello', 'world', 'lin', 'hello', 'lin']

const obj = arr.reduce((acc, cur) => {
  if (cur in acc) {
    acc[cur]++
  } else {
    acc[cur] = 1
  }
  return acc
}, {})
console.log(obj) // { hello: 2, world: 1, lin: 2 }
```

## æŒ‰å±æ€§å¯¹ Object åˆ†ç±»
```js
const people = [
  { name: 'Alice', age: 21 },
  { name: 'Max', age: 20 },
  { name: 'Jane', age: 20 }
]

function groupBy (objectArray, property) {
  return objectArray.reduce((acc, obj) => {
    const key = obj[property]
    if (!acc[key]) {
      acc[key] = []
    }
    acc[key].push(obj)
    return acc
  }, {})
}

const groupedPeople = groupBy(people, 'age')
console.log(groupedPeople)
// {
//   20: [
//     { name: 'Max', age: 20 },
//     { name: 'Jane', age: 20 }
//   ],
//   21: [{ name: 'Alice', age: 21 }]
// }
```
## ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å’Œåˆå§‹å€¼ç»‘å®šåŒ…å«åœ¨å¯¹è±¡æ•°ç»„ä¸­çš„æ•°ç»„
```js
// friends - å¯¹è±¡æ•°ç»„
// where object field "books" - list of favorite books
const friends = [{
  name: 'Anna',
  books: ['Bible', 'Harry Potter'],
  age: 21
}, {
  name: 'Bob',
  books: ['War and peace', 'Romeo and Juliet'],
  age: 26
}, {
  name: 'Alice',
  books: ['The Lord of the Rings', 'The Shining'],
  age: 18
}]

// allbooks - list which will contain all friends' books +
// additional list contained in initialValue
const allbooks = friends.reduce((acc, curr) => {
  return [...acc, ...curr.books]
}, ['Alphabet'])
console.log(allbooks)
// allbooks = [
//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace',
//   'Romeo and Juliet', 'The Lord of the Rings',
//   'The Shining'
// ]
```
## æ•°ç»„å»é‡
```js
const arr = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']
const res = arr.reduce((acc, cur) => {
  if (acc.indexOf(cur) === -1) {
    acc.push(cur)
  }
  return acc
}, [])

console.log(res) // ['a', 'b', 'c', 'e', 'd']

```

ä¸è¿‡ä¸å¦‚ç”¨ Set å»é‡ç®€æ´ã€‚

```js
const arr = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']
const res = Array.from(new Set(arr)) // ['a', 'b', 'c', 'e', 'd']
```

## ä¸²è¡Œæ‰§è¡Œ promise
```js
/**
 * Runs promises from array of functions that can return promises
 * in chained manner
 *
 * @param {array} arr - promise arr
 * @return {Object} promise object
 */
function runPromiseInSequence (arr, input) {
  return arr.reduce(
    (acc, cur) => acc.then(cur),
    Promise.resolve(input)
  )
}

// promise function 1
function p1 (a) {
  return new Promise((resolve, reject) => {
    resolve(a * 5)
  })
}

// promise function 2
function p2 (a) {
  return new Promise((resolve, reject) => {
    resolve(a * 2)
  })
}

// function 3  - will be wrapped in a resolved promise by .then()
function f3 (a) {
  return a * 3
}

// promise function 4
function p4 (a) {
  return new Promise((resolve, reject) => {
    resolve(a * 4)
  })
}

const promiseArr = [p1, p2, f3, p4]
runPromiseInSequence(promiseArr, 10)
  .then(console.log) // 1200
```

æ‰©å±•é˜…è¯»ï¼š[25ä¸ªä½ ä¸å¾—ä¸çŸ¥é“çš„æ•°ç»„reduceé«˜çº§ç”¨æ³•](https://juejin.cn/post/6844904063729926152#comment)

**ç»“å°¾**

å¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ çš„ğŸ‘å°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ^_^

æˆ‘æ˜¯é˜¿æ—ï¼Œè¾“å‡ºæ´è§æŠ€æœ¯ï¼Œå†ä¼šï¼


ä¸Šä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ12ï¼‰ã€JavaScript ä¸­æ•°ç»„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ](https://github.com/wlllyfor/question-everyday/blob/main/JS/12.JavaScript%20%E4%B8%AD%E6%95%B0%E7%BB%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F.md)

ä¸‹ä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ14ï¼‰ã€JavaScript ä¸­å¦‚ä½•ä¸­æ–­ forEach å¾ªç¯?](https://juejin.cn/post/7073277567519686663)