æœ¬é¢˜éš¾åº¦ï¼šâ­ â­ â­

è¦æ±‚ï¼š

- æ”¯æŒå¯¹è±¡ã€æ•°ç»„ã€æ—¥æœŸã€æ­£åˆ™çš„æ‹·è´ã€‚
- å¤„ç†åŸå§‹ç±»å‹ï¼ˆåŸå§‹ç±»å‹ç›´æ¥è¿”å›ï¼Œåªæœ‰å¼•ç”¨ç±»å‹æ‰æœ‰æ·±æ‹·è´è¿™ä¸ªæ¦‚å¿µï¼‰ã€‚
- å¤„ç† Symbol ä½œä¸ºé”®åçš„æƒ…å†µã€‚
- å¤„ç†å‡½æ•°ï¼ˆå‡½æ•°ç›´æ¥è¿”å›ï¼Œæ‹·è´å‡½æ•°æ²¡æœ‰æ„ä¹‰ï¼Œä¸¤ä¸ªå¯¹è±¡ä½¿ç”¨å†…å­˜ä¸­åŒä¸€ä¸ªåœ°å€çš„å‡½æ•°ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼‰ã€‚
- å¤„ç† DOM å…ƒç´ ï¼ˆDOM å…ƒç´ ç›´æ¥è¿”å›ï¼Œæ‹·è´ DOM å…ƒç´ æ²¡æœ‰æ„ä¹‰ï¼Œéƒ½æ˜¯æŒ‡å‘é¡µé¢ä¸­åŒä¸€ä¸ªï¼‰ã€‚
- é¢å¤–å¼€è¾Ÿä¸€ä¸ªå‚¨å­˜ç©ºé—´ WeakMapï¼Œè§£å†³å¾ªç¯å¼•ç”¨é€’å½’çˆ†æ ˆé—®é¢˜ï¼ˆå¼•å…¥ WeakMap çš„å¦ä¸€ä¸ªæ„ä¹‰ï¼Œé…åˆåƒåœ¾å›æ”¶æœºåˆ¶ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰ã€‚

ç­”ï¼š

```js
function deepClone (target, hash = new WeakMap()) { // é¢å¤–å¼€è¾Ÿä¸€ä¸ªå­˜å‚¨ç©ºé—´WeakMapæ¥å­˜å‚¨å½“å‰å¯¹è±¡
  if (target === null) return target // å¦‚æœæ˜¯ null å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ
  if (target instanceof Date) return new Date(target) // å¤„ç†æ—¥æœŸ
  if (target instanceof RegExp) return new RegExp(target) // å¤„ç†æ­£åˆ™
  if (target instanceof HTMLElement) return target // å¤„ç† DOMå…ƒç´ 

  if (typeof target !== 'object') return target // å¤„ç†åŸå§‹ç±»å‹å’Œå‡½æ•° ä¸éœ€è¦æ·±æ‹·è´ï¼Œç›´æ¥è¿”å›

  // æ˜¯å¼•ç”¨ç±»å‹çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´
  if (hash.get(target)) return hash.get(target) // å½“éœ€è¦æ‹·è´å½“å‰å¯¹è±¡æ—¶ï¼Œå…ˆå»å­˜å‚¨ç©ºé—´ä¸­æ‰¾ï¼Œå¦‚æœæœ‰çš„è¯ç›´æ¥è¿”å›
  const cloneTarget = new target.constructor() // åˆ›å»ºä¸€ä¸ªæ–°çš„å…‹éš†å¯¹è±¡æˆ–å…‹éš†æ•°ç»„
  hash.set(target, cloneTarget) // å¦‚æœå­˜å‚¨ç©ºé—´ä¸­æ²¡æœ‰å°±å­˜è¿› hash é‡Œ

  Reflect.ownKeys(target).forEach(key => { // å¼•å…¥ Reflect.ownKeysï¼Œå¤„ç† Symbol ä½œä¸ºé”®åçš„æƒ…å†µ
    cloneTarget[key] = deepClone(target[key], hash) // é€’å½’æ‹·è´æ¯ä¸€å±‚
  })
  return cloneTarget // è¿”å›å…‹éš†çš„å¯¹è±¡
}
```
æµ‹è¯•ä¸€ä¸‹ï¼š
```js
const obj = {
  a: true,
  b: 100,
  c: 'str',
  d: undefined,
  e: null,
  f: Symbol('f'),
  g: {
    g1: {} // æ·±å±‚å¯¹è±¡
  },
  h: [], // æ•°ç»„
  i: new Date(), // Date
  j: /abc/, // æ­£åˆ™
  k: function () {}, // å‡½æ•°
  l: [document.getElementById('foo')] // å¼•å…¥ WeakMap çš„æ„ä¹‰ï¼Œå¤„ç†å¯èƒ½è¢«æ¸…é™¤çš„ DOM å…ƒç´ 
}

obj.obj = obj // å¾ªç¯å¼•ç”¨

const name = Symbol('name')
obj[name] = 'lin'  // Symbol ä½œä¸ºé”®

const newObj = deepClone(obj)

console.log(newObj)
```
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d5edbea178447d6827d60ea0dab9a06~tplv-k3u1fbpfcp-watermark.image?)

æ‰‹å†™æ·±æ‹·è´çš„è¿‡ç¨‹å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š

[è½»æ¾æ‹¿ä¸‹ JS æµ…æ‹·è´ã€æ·±æ‹·è´](https://juejin.cn/post/7072528644739956773)

 
**ç»“å°¾**

å¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ çš„ğŸ‘å°±æ˜¯å¯¹æˆ‘çš„æœ€å¤§æ”¯æŒ^_^

æˆ‘æ˜¯é˜¿æ—ï¼Œè¾“å‡ºæ´è§æŠ€æœ¯ï¼Œå†ä¼šï¼

ä¸Šä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ16ï¼‰ã€æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿ](https://github.com/wlllyfor/question-everyday/blob/main/JS/16.%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F.md)

ä¸‹ä¸€ç¯‡ï¼š


[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ18ï¼‰ã€JS ä¸­ä¼ªæ•°ç»„æ€ä¹ˆè½¬æˆæ•°ç»„](https://github.com/wlllyfor/question-everyday/blob/main/JS/18.JS%20%E4%B8%AD%E4%BC%AA%E6%95%B0%E7%BB%84%E6%80%8E%E4%B9%88%E8%BD%AC%E6%88%90%E6%95%B0%E7%BB%84.md)