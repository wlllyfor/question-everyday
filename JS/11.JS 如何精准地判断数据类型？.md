æœ¬é¢˜éš¾åº¦ï¼šâ­ â­

ç­”ï¼š

ä½¿ç”¨ `Object.prototype.toString` æ–¹æ³•ï¼Œå¯ä»¥ç²¾å‡†åœ°åˆ¤æ–­æ•°æ®ç±»å‹ã€‚

## typeof å’Œ instanceof çš„å¼Šç«¯

-   `Â typeof`Â å¯ä»¥åˆ¤æ–­é™¤äº† `null` ä»¥å¤–çš„åŸºç¡€æ•°æ®ç±»å‹ï¼Œä½†æ˜¯åˆ¤æ–­å¼•ç”¨ç±»å‹æ—¶ï¼Œé™¤äº† `function`Â ç±»å‹ï¼Œå…¶ä»–çš„æ— æ³•å‡†ç¡®åˆ¤æ–­ã€‚
-   `instanceof`Â å¯ä»¥å‡†ç¡®åœ°åˆ¤æ–­å„ç§å¼•ç”¨ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ­£ç¡®åˆ¤æ–­åŸå§‹æ•°æ®ç±»å‹ã€‚

## Object.prototype.toString

è°ƒç”¨è¯¥æ–¹æ³•ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼ `[object Xxx]`çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¡¨ç¤ºè¯¥å¯¹è±¡ã€‚

```js
// ç›´æ¥è°ƒç”¨
Object.prototype.toString({})      // '[object Object]'

// åŠ ä¸Š call
// å¼•ç”¨ç±»å‹
Object.prototype.toString.call({})           // '[object Object]'
Object.prototype.toString.call(function(){}) // "[object Function]'
Object.prototype.toString.call(/123/g)       // '[object RegExp]'
Object.prototype.toString.call(new Date())   // '[object Date]'
Object.prototype.toString.call(new Error())  // '[object Error]'
Object.prototype.toString.call([])           // '[object Array]'
Object.prototype.toString.call(new Map())    // '[object Map]'
Object.prototype.toString.call(new Set())    // '[object Set]'
Object.prototype.toString.call(new WeakMap()) // '[object WeakMap]'
Object.prototype.toString.call(new WeakSet()) // '[object WeakSet]'
Object.prototype.toString.call(document)     // '[object HTMLDocument]'
Object.prototype.toString.call(window)       // '[object Window]'
Object.prototype.toString.call(this)         // '[object Window]'

// åŸå§‹ç±»å‹
Object.prototype.toString.call(1)           // '[object Number]'
Object.prototype.toString.call('1')         // '[object String]'
Object.prototype.toString.call(true)        // '[object Boolean]'
Object.prototype.toString.call(1n)          // '[object BigInt]'
Object.prototype.toString.call(null)        // '[object Null]'
Object.prototype.toString.call(undefined)   // '[object Undefined]'
Object.prototype.toString.call(Symbol('a')) // '[object Symbol]'

```

## ä¸ºä»€ä¹ˆè¦è°ƒç”¨ call

`call` æ˜¯å‡½æ•°çš„æ–¹æ³•ï¼Œç”¨æ¥æ”¹å˜ `this` æŒ‡å‘ï¼Œç”¨ `apply` ä¹Ÿå¯ä»¥ã€‚

å¦‚æœä¸æ”¹å˜`this`æŒ‡å‘ä¸ºæˆ‘ä»¬çš„ç›®æ ‡å˜é‡ï¼Œ`this`å°†æ°¸è¿œæŒ‡å‘è°ƒç”¨çš„`Object.prototype`ã€‚

```js
Object.prototype.toString([])       // '[object Object]'  this æŒ‡å‘ Object.prototypeï¼Œåˆ¤æ–­ç±»å‹ä¸º Objectã€‚
Object.prototype.toString.call([])  // '[object Array]' this æŒ‡å‘ []ï¼Œåˆ¤æ–­ç±»å‹ä¸º Array
```

```js
// é‡å†™ Object.prototype.toString æ–¹æ³•ï¼ŒæŠŠ this æ‰“å°å‡ºæ¥çœ‹ä¸€ä¸‹
Object.prototype.toStringÂ =Â functionÂ ()Â {
  console.log(this)
}
// å¼•ç”¨ç±»å‹
Object.prototype.toString([])       // Object.prototype
Object.prototype.toString.call([])  // []

// åŸå§‹ç±»å‹
Object.prototype.toString(1)       // Object.prototype
Object.prototype.toString.call(1)  // NumberÂ {1}
// è¿™é‡Œçš„ NumberÂ {1}ï¼Œæ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼ŒæŠŠåŸºæœ¬ç±»å‹ç”¨å®ƒä»¬ç›¸åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼Œä½¿å…¶å…·æœ‰å¯¹è±¡çš„æ€§è´¨
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90cae6e6e8ee4537a28860d7b915f018~tplv-k3u1fbpfcp-watermark.image?)

## å°è£…ä¸€ä¸ªç²¾å‡†åˆ¤æ–­ç±»å‹çš„å·¥å…·å‡½æ•°
**Object.prototype.toString åˆ¤æ–­ç±»å‹çš„ç¼ºé™·**

- åˆ¤æ–­åŸå§‹ç±»å‹æ—¶ï¼Œä¼šè¿›è¡Œ`è£…ç®±æ“ä½œ`ï¼Œäº§ç”Ÿå¾ˆå¤š**ä¸´æ—¶å¯¹è±¡**

è™½ç„¶åªç”¨ `Object.prototype.toString` ä¹Ÿå¯ä»¥åˆ¤æ–­æ‰€æœ‰çš„ç±»å‹ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»“åˆ `typeof` ï¼Œå„å–æ‰€é•¿ï¼Œå°è£…ä¸€ä¸ªç²¾å‡†åˆ¤æ–­ç±»å‹çš„å·¥å…·å‡½æ•°ã€‚


```js
function getType (obj) {
  const type = typeof obj
  if (type !== 'object') { // å…ˆè¿›è¡Œtypeofåˆ¤æ–­ï¼Œå¦‚æœæ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›
    return type
  }
  // å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå†è¿›è¡Œå¦‚ä¸‹çš„åˆ¤æ–­ï¼Œæ­£åˆ™è¿”å›ç»“æœ
  return Object.prototype.toString
    .call(obj)
    .replace(/^\[object (\S+)\]$/, '$1')
    .toLocaleLowerCase()
}

getType(true)         // boolean
getType(1)            // number
getType('1')          // string
getType(1n)           // bigint
getType(null)         // null
getType(undefined)    // undefined
getType(Symbol('a'))  // symbol

getType([])            // array
getType({})            // object
getType(function() {}) // function
getType(new Date())    // date
getType(/abc/)         // regexp
getType(new Error())   // error
getType(document)      // htmldocument
getType(window)        // window
```
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè°ƒç”¨äº† `toLocaleLowerCase()`ï¼Œç»Ÿä¸€å˜æˆå°å†™ã€‚

å› ä¸º `Object.prototype.toString` è¿”å›çš„ç±»å‹å­—ç¬¦ä¸²æ ¼å¼ä¸æ˜¯ç»Ÿä¸€çš„ï¼Œæœ‰äº›æ˜¯é¦–å­—æ¯å¤§å†™ï¼Œæœ‰äº›æ˜¯å¸•æ–¯å¡å½¢å¼ï¼Œå•è¯ä¸­é—´ä¹Ÿæœ‰å¤§å†™å­—æ¯ï¼Œä¸å¥½è®°ã€‚

è¿™ä¸ªå·¥å…·å‡½æ•°è¶…çº§æœ‰ç”¨ï¼Œæœ‰äº†å®ƒï¼Œå†ä¹Ÿä¸ç”¨å»ä¸šåŠ¡ä»£ç é‡Œå†™å†—é•¿çš„åˆ¤æ–­ç±»å‹çš„ä»£ç äº†ã€‚

**ç»“å°¾**

è¿™æ˜¯é˜¿æ—æŒç»­æ›´æ–‡çš„ç¬¬37å¤©ï¼Œè¾“å‡ºæ´è§æŠ€æœ¯ï¼Œå†ä¼šï½

å¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ çš„ğŸ‘å°±æ˜¯å¯¹æˆ‘çš„æœ€å¤§æ”¯æŒ^_^

ä¸Šä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ10ï¼‰ã€typeof ä¸ instanceof æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://github.com/wlllyfor/question-everyday/blob/main/JS/10.typeof%20%E4%B8%8E%20instanceof%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F.md)

ä¸‹ä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ12ï¼‰ã€JavaScript ä¸­æ•°ç»„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ](https://juejin.cn/post/7072154355721306126)