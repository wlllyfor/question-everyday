æœ¬é¢˜éš¾åº¦ï¼šâ­ â­ 

ç­”ï¼š

```js
function Singleton () {}

const getSingletonInstance = (function () {
  let instance = null
  return function () {
    if (!instance) {
      instance = new Singleton()
    }
    return instance
  }
})()

const s1 = getSingletonInstance()
const s2 = getSingletonInstance()

console.log(s1 === s2) // true
```


## ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼

å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒ**ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹**ã€‚

å•ä¾‹æ¨¡å¼çš„å¥½å¤„å°±æ˜¯é¿å…äº†é‡å¤å®ä¾‹åŒ–å¸¦æ¥çš„å†…å­˜å¼€é”€ã€‚

å¦‚ä½•æ‰èƒ½ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Ÿ

```js
class Singleton {}

const s1 = new Singleton()
const s2 = new Singleton()

console.log(s1 === s2) // false
```
ä¸Šé¢çš„ä»£ç ä¸­ï¼Œs1 å’Œ s2 æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ï¼ŒæŒ‡å‘ä¸åŒçš„å†…å­˜åœ°å€ã€‚

è€Œå•ä¾‹æ¨¡å¼æƒ³è¦åšåˆ°çš„æ˜¯ï¼Œ**ä¸ç®¡æˆ‘ä»¬å°è¯•å» new å¤šå°‘æ¬¡ Singleton è¿™ä¸ªç±»ï¼Œå®ƒéƒ½åªè¿”å›ç¬¬ä¸€æ¬¡åˆ›å»ºçš„é‚£ä¸ªå®ä¾‹**ã€‚


ç”¨ä¸€ä¸ªé™æ€å±æ€§ instance æ¥è®°å½•ç”Ÿæˆçš„å®ä¾‹ï¼Œç”¨ä¸€ä¸ª getInstance æ–¹æ³•æ¥åˆ¤æ–­å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥è¿”å›ï¼Œå¦åˆ™å°±åˆ›å»ºäº†å†è¿”å›ã€‚

```js
class Singleton {
  static instance = null
  static getInstance () {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton()
    }
    return Singleton.instance
  }
}

const s1 = Singleton.getInstance()
const s2 = Singleton.getInstance()

console.log(s1 === s2) // true
```
## é—­åŒ…å®ç°å•ä¾‹æ¨¡å¼

ä¹Ÿå¯ä»¥ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œç”¨ä¸€ä¸ªç§æœ‰å˜é‡ instance æ¥è®°å½•å®ä¾‹

```js
function Singleton () {}

const getSingletonInstance = (function () {
  let instance = null
  return function () {
    if (!instance) {
      instance = new Singleton()
    }
    return instance
  }
})()

const s1 = getSingletonInstance()
const s2 = getSingletonInstance()

console.log(s1 === s2) // true
```

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb84cb530ba24cd2bc1090c5f8792e8b~tplv-k3u1fbpfcp-watermark.image?)

è¿™æ ·å°±æŠŠç¬¬ä¸€æ¬¡åˆ›å»ºçš„å®ä¾‹ä¿å­˜åˆ°äº†é—­åŒ…ä¸­çš„ instance å˜é‡é‡Œï¼Œåç»­æ— è®ºå†åˆ›å»ºå¤šå°‘æ¬¡ï¼Œç›´æ¥è¿”å›å°±è¡Œã€‚

## å•ä¾‹æ¨¡å¼çš„åº”ç”¨ï¼šå®ç°ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æ¨¡æ€æ¡†

![å•ä¾‹æ¨¡å¼æ¨¡æ€æ¡†.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce8564bb813a4e8b9fe888461155c8f8~tplv-k3u1fbpfcp-watermark.image?)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .modal {
      width: 200px;
      height: 200px;
      border: 1px solid rgb(67, 69, 160);
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
  </style>
</head>
<body>
  <button id="openBtn">æ‰“å¼€æ¨¡æ€æ¡†</button>
  <button id="closeBtn">å…³é—­æ¨¡æ€æ¡†</button>
  <script>
    const Modal = (function() {
      let modal = null
      return function() {
        if (!modal) {
          modal = document.createElement('div')
          modal.innerHTML = 'æˆ‘æ˜¯å…¨å±€å”¯ä¸€çš„æ¨¡æ€æ¡†'
          modal.className = 'modal'
          modal.style.display = 'none'
          document.body.appendChild(modal)
        }
        return modal
      }
    })()
    
    // ç‚¹å‡»æ‰“å¼€æŒ‰é’®å±•ç¤ºæ¨¡æ€æ¡†
    document.getElementById('openBtn').addEventListener('click', function() {
    	const modal = new Modal()
    	modal.style.display = 'block'
    })
    
    // ç‚¹å‡»å…³é—­æŒ‰é’®éšè—æ¨¡æ€æ¡†
    document.getElementById('closeBtn').addEventListener('click', function() {
    	const modal = new Modal() // é‡æ–°å®šä¹‰ä¸€æ¬¡ï¼Œå…¶å®è¿˜æ˜¯åŒä¸€ä¸ªæ¨¡æ€æ¡†
    	if(modal) {
    	  modal.style.display = 'none'
    	}
    })
  </script>
</body>
</html>
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddbda45e3dd3412eb1abd40f37947717~tplv-k3u1fbpfcp-watermark.image?)

**ç»“å°¾**

å¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ çš„ğŸ‘å°±æ˜¯å¯¹æˆ‘çš„æœ€å¤§æ”¯æŒ^_^

ä½ ä¹Ÿå¯ä»¥å…³æ³¨ã€Šå‰ç«¯æ¯æ—¥ä¸€é—®ã€‹è¿™ä¸ªä¸“æ ï¼Œé˜²æ­¢å¤±è”å“¦ï½

æˆ‘æ˜¯é˜¿æ—ï¼Œè¾“å‡ºæ´è§æŠ€æœ¯ï¼Œå†ä¼šï¼

ä¸Šä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ31ï¼‰ã€å¦‚ä½•ç”¨é—­åŒ…è®¾è®¡ä¸€ä¸ªç¼“å­˜æ¨¡å—ï¼Ÿ](https://github.com/wlllyfor/question-everyday/blob/main/Blog/31.%E5%A6%82%E4%BD%95%E7%94%A8%E9%97%AD%E5%8C%85%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%BC%93%E5%AD%98%E6%A8%A1%E5%9D%97%EF%BC%9F.md)

ä¸‹ä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ33ï¼‰ã€é—­åŒ…ä¸æŸ¯é‡ŒåŒ–å‡½æ•°ã€åå‡½æ•°çš„å…³ç³»ï¼Ÿ](https://github.com/wlllyfor/question-everyday/blob/main/Blog/33.%E9%97%AD%E5%8C%85%E4%B8%8E%E6%9F%AF%E9%87%8C%E5%8C%96%E5%87%BD%E6%95%B0%E3%80%81%E5%81%8F%E5%87%BD%E6%95%B0%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F.md)