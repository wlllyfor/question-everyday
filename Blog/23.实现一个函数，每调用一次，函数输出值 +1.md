æœ¬é¢˜éš¾åº¦ï¼šâ­ 

ç­”ï¼š

```js
const add = (function () {
  let i = 0
  return function () {
    return ++i
  }
})()
console.log(add())// 1
console.log(add())// 2
```

æœ¬é¢˜å®é™…ä¸Šè€ƒå¯Ÿçš„æ˜¯é—­åŒ…ï¼Œä¸Šé¢æ˜¯ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°å®ç°çš„ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚

è¿™é‡Œ i å°±æ˜¯å‡½æ•° add çš„ç§æœ‰å˜é‡ï¼Œä¼šä¿ç•™åœ¨å†…å­˜ä¸­ã€‚

```js
function add () {
  let i = 0
  return function () {
    return ++i
  }
}

const temp = add() // å…ˆç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥æ”¶æ‰§è¡Œ add çš„è¿”å›å€¼ï¼Œå†è°ƒç”¨ temp()

console.log(temp()) // 1
console.log(temp()) // 2

// å¦‚æœç›´æ¥å†™ add()() ä¸ä¼šç”Ÿæ•ˆ
```

å¦‚æœå†å®ç°å¾—ä»”ç»†ä¸€äº›ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æŠŠè¦æ“ä½œçš„å‡½æ•°åŒ…èµ·æ¥ï¼Œè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚

æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•° fnï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ï¼Œå‡½æ•°è¾“å‡ºå€¼ +1ï¼Œæ“ä½œçš„å°±æ˜¯ç§æœ‰å˜é‡ iã€‚

```js
function fn () {
  var i = 0

  return { // fn å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ getã€set ç­‰æ–¹æ³•ï¼Œæ¥æ“ä½œç§æœ‰å˜é‡ i
    get: function () {
      return i
    },
    set: function (val) {
      i = val
    },
    increment: function () {
      return ++i
    }
  }
}

const counter = fn() // æ‰§è¡Œ fn å‡½æ•°ï¼Œæ‹¿åˆ° counter å¯¹è±¡
counter.get() // 0
counter.set(3)
counter.increment() // 4
counter.increment() // 5
```

å¦‚æœæˆ‘ä»¬è¯•å›¾ä»å…¨å±€ä½œç”¨åŸŸç›´æ¥è®¿é—®Â `counter.i`Â ï¼Œä¼šå¾—åˆ° undefinedï¼Œå› ä¸ºÂ `i`Â æ˜¯å®šä¹‰åœ¨å‡½æ•° fn ä½œç”¨åŸŸå†…çš„å˜é‡ï¼Œå®ƒå¹¶ä¸æ˜¯Â `counter`çš„å±æ€§ã€‚åŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾è®¿é—®Â `i`Â ä¹Ÿä¼šæ”¶åˆ°é”™è¯¯ï¼Œå› ä¸ºÂ `i`Â å¹¶æ²¡æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å®šä¹‰ã€‚

è¿™ä¸ªi å°±å¯ä»¥å½“ä½œå‡½æ•° fn çš„ç§æœ‰å˜é‡ï¼Œå³ä½¿ fn æ‰§è¡Œå®Œæ¯•è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶äº†ï¼Œiè¿˜æ˜¯ä¼šä¿å­˜åœ¨é—­åŒ…ä¸­ï¼Œä¾ç„¶å¯ä»¥è®¿é—®ã€æ“ä½œã€‚

**ç»“å°¾**

å¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ çš„ğŸ‘å°±æ˜¯å¯¹æˆ‘çš„æœ€å¤§æ”¯æŒ^_^

æˆ‘æ˜¯é˜¿æ—ï¼Œè¾“å‡ºæ´è§æŠ€æœ¯ï¼Œå†ä¼šï¼

ä¸Šä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ22ï¼‰ã€è¯´ä¸€ä¸‹ä½ å¯¹ JS ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰çš„ç†è§£](https://github.com/wlllyfor/question-everyday/blob/main/JS/22.%E8%AF%B4%E4%B8%80%E4%B8%8B%E4%BD%A0%E5%AF%B9%20JS%20%20%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%EF%BC%88IIFE%EF%BC%89%E7%9A%84%E7%90%86%E8%A7%A3.md)

ä¸‹ä¸€ç¯‡ï¼š

[ã€Œå‰ç«¯æ¯æ—¥ä¸€é—®ï¼ˆ24ï¼‰ã€è¯´ä¸€ä¸‹ JS ä¸­çš„ this](https://github.com/wlllyfor/question-everyday/blob/main/JS/24.%E8%AF%B4%E4%B8%80%E4%B8%8B%20JS%20%E4%B8%AD%E7%9A%84%20this.md)